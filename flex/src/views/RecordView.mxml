<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" 
	width="800" height="600" backgroundColor="green" creationComplete="init();"
>
	<mx:Script>	
		<![CDATA[
			import models.TouchPoint;
		
			// Map of TUIO blobIds to TouchPoint objects. The objects in this
			// array are always up to date (coordinates, existance, etc)
			private var activeTouchPoints:Array = new Array();
			
			public function init():void
			{
				cnvs_gesturePad.addEventListener(TouchEvent.MOUSE_DOWN, gesturePadTouchDown);
				cnvs_gesturePad.addEventListener(TouchEvent.MOUSE_UP, gesturePadTouchUp);
				cnvs_gesturePad.addEventListener(Event.ENTER_FRAME, gesturePadUpdater);	
			}	
			
			private function recordGesture():void
			{
				
			}
			
			// this function is constantly running (triggered by frame change).
			// Updates the coordinates of the active points on the gesture pad.
			private function gesturePadUpdater(e:Event):void
			{
				for each (var touchPoint:TouchPoint in this.activeTouchPoints) {
					// update the coordinates for active points
					var i;
					//touchPoint. 
				}
			}
			
			// triggered when a finger is pressed down onto the 
			// gesture pad.
			private function gesturePadTouchDown(e:TouchEvent):void
			{
				var tpObj:TouchPoint = new TouchPoint();
				tpObj.setX(e.stageX);
				tpObj.setY(e.stageY);
				tpObj.setTimestamp(new Date().getTime());
				
				this.activeTouchPoints[e.ID] = tpObj;
			}
			
			// triggered when a finger is lifted off the gesture pad
			private function gesturePadTouchUp(e:TouchEvent):void
			{
				this.activeTouchPoints[e.ID] = null;	
			}
		]]>
	</mx:Script>

	<mx:Canvas id="cnvs_gesturePad" backgroundColor="black" width="300" height="300" x="2" y="42"></mx:Canvas>
	<mx:Text id="txt_x" text="X"/>
	<mx:Text id="txt_y" text="Y" y="14"/>
	
</mx:Canvas>
